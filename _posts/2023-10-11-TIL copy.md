---
title: 2023-10-12 TIL
author: park
date: 2023-10-12 18:04:48 +0800
categories: [TIL, 2023-10]
tags: [typography]
math: true
mermaid: true
published: true # 포스팅 개시할 때, 바로 반영되는 옵션
# image: 

---

<br>

## ✍ 오늘 공부한 내용

<br>
● 엔티티 생성에 관한 고찰<br>
<br>

---

<br>

## 🧠 느낀 점 & 배운 점 

토이프로젝트 Snack 에서 배치 기능에 새로운 기능을 추가했다.<br>
감소되는 구독 데이터가 있다면, 감소에 사용된 해당 데이터로 배달 데이터를 생성해 주는 것.<br>
우선 중요했던 점은 <b>'배달 데이터는 구독으로만 생성되는 것이 아니다.'</b> 였다.<br>
<b>일반적인 주문에서도 생성</b>될 수 있던 점.<br>
추상화를 진행하기로 했다.<br>
다만 문제가 좀 생겼다.<br>
<br>

<b>※ 문제점</b><br>

1. 배달 데이터의 기반이 될 데이터의 엔티티가 추상화할 기능의 인터페이스를 구현해야 했으며,<br>
2. 상태가 변화될 수 있는 엔티티를 다른 엔티티가 생성할 수 있다는 점.<br>

<br>
두 문제가 가장 컸다.<br>
그래서 해결방법 또한 두 가지 생각해봤다.<br>
<br>

<b>※ 해결 방안</b><br>

1. 2번 문제의 브릿지 역할을 할 DTO 를 추가하여 엔티티를 직접 생성하는 것이 아닌 DTO 에 값만 담고, 반환된 서비스 로직에서 엔티티의 인스턴스를 획득하기.<br>
2. 엔티티 생성을 담당할 유틸리티 클래스를 추가하여 필요한 값만 DI 받은 후, 생성해 주는 것.<br>

<br>
해결법 1 번으로 구현할 경우, 현재 수정할 코드 즉, 사이드 이펙트가 적을 것이다.<br>
반환 값만 DTO 로 변경하면 되는 것이다.<br>
다만 인터페이스를 구현해야 하는 문제점(작성자 기준) 은 아직 가지고 있다.<br>
<br>
해결법 2 번으로 구현할 경우, 메서드는 정적으로 구현해야 할 것이다.<br>
그리고 기반이 되는 엔티티가 인터페이스를 구현하거나 다른 엔티티의 인스턴스를 획득하지 않아도 될 것이다.<br>
하지만 코드를 수정해야하는 사이드 이펙트가 클 것이다.<br>
<br>
아직도 고민 중이라서 <b>같이 공부하던 친한 동료</b>에게 물었는데,<br>
<b>"코드 수정의 사이드 이펙트가 가장 적은 것으로 선택하자."</b><br>
가 답변 이었다.<br>
<br>
음... 심히 고민된다.<br>

<br>

---

<br>

## 🍱 내일의 도시락

<br>
● Snack, Purchase, User 도메인 관련 기능 구현하기<br>
● validate<br>
● JPA 기본<br>
<br>
<br>